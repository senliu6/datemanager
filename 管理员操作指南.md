# 数据管理平台 - 管理员操作指南（简化版）

## 🚀 快速部署（本地局域网）

### 1. 环境准备
```bash
# 确保已安装Node.js (版本 >= 16)
node --version

# 如果未安装，请下载安装：
# https://nodejs.org/
```

### 2. 一键启动
```bash
# 克隆或下载项目到本地
# 进入项目目录

# 安装依赖（首次运行）
npm install

# 启动服务器
./start_local_server.sh
# 或者
chmod +x start_local_server.sh && ./start_local_server.sh
```

### 3. 访问服务
- **本机访问**: http://localhost:3001
- **局域网访问**: http://你的IP:3001
- **默认登录**: 用户名 `upload`，密码 `upload123`

## 📁 目录结构
```
datemanager/
├── server/                 # 后端服务
├── src/                   # 前端源码
├── Uploads/               # 文件上传目录（自动创建）
├── one_click_upload.sh    # Linux/Mac上传脚本
├── one_click_upload.bat   # Windows上传脚本
├── start_local_server.sh  # 服务器启动脚本
└── 用户使用说明.md        # 用户使用说明
```

## 🔧 配置说明

### 简化认证配置
系统支持多种认证方式：
1. **Web界面登录**: 用户名 `upload`，密码 `upload123`
2. **脚本上传**: 自动使用内置认证
3. **开发模式**: 本地访问免认证

### 环境配置文件 (.env.local)
```bash
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# 简化认证
SIMPLE_AUTH_ENABLED=true
UPLOAD_USER=upload
UPLOAD_PASS=upload123

# 文件上传配置
MAX_FILE_SIZE=2GB
```

## 👥 用户管理

### 默认用户
- **上传用户**: `upload` / `upload123`
  - 权限: 文件上传、数据查看
  - 用途: 普通用户上传文件

### 添加新用户（可选）
如需添加更多用户，可以修改认证中间件或使用Web界面管理。

## 📊 文件管理

### 上传目录
- **默认路径**: `./Uploads/`
- **自动分类**: 按上传时间和用户分类
- **文件大小**: 最大2GB

### 文件清理
```bash
# 清理临时文件
find ./Uploads -name "*.tmp" -delete

# 查看磁盘使用
du -sh ./Uploads
```

## 🔍 监控和日志

### 查看日志
```bash
# 服务器日志
tail -f server.log

# 上传日志（用户端）
cat upload.log
```

### 系统状态
- **健康检查**: http://localhost:3001/api/health
- **文件统计**: 通过Web界面查看

## 🛠️ 故障排除

### 常见问题

#### 1. 端口被占用
```bash
# 查看端口占用
lsof -i :3001

# 杀死占用进程
kill -9 PID
```

#### 2. 权限问题
```bash
# 给脚本执行权限
chmod +x *.sh

# 修改上传目录权限
chmod 755 Uploads/
```

#### 3. 网络访问问题
```bash
# 检查防火墙
sudo ufw status

# 开放端口（如需要）
sudo ufw allow 3001/tcp
```

#### 4. 找不到服务器
- 确认服务器已启动
- 检查IP地址是否正确
- 确保在同一局域网内

### 重启服务
```bash
# 停止服务（Ctrl+C）
# 重新启动
./start_local_server.sh
```

## 📱 客户端配置

### 分发上传脚本
1. 将 `one_click_upload.sh`（Linux/Mac）或 `one_click_upload.bat`（Windows）分发给用户
2. 告知用户将脚本放在要上传的文件夹中
3. 用户双击运行即可

### 用户指导
- 提供《用户使用说明.md》给用户
- 告知服务器IP地址
- 确保用户在同一局域网内

## 🔒 安全建议

### 局域网使用
- 仅在可信的局域网环境中使用
- 定期更改默认密码
- 监控上传文件内容

### 生产环境部署
如需部署到生产环境，建议：
- 使用HTTPS
- 配置更强的认证机制
- 设置防火墙规则
- 定期备份数据

## 📋 维护清单

### 日常维护
- [ ] 检查服务器运行状态
- [ ] 查看磁盘空间使用
- [ ] 清理临时文件
- [ ] 检查上传日志

### 定期维护
- [ ] 备份重要文件
- [ ] 更新系统依赖
- [ ] 检查安全设置
- [ ] 优化性能配置

## 💡 使用技巧

### 1. 批量部署
可以将整个项目打包，在多台机器上快速部署。

### 2. 自定义配置
修改 `.env.local` 文件可以自定义端口、认证信息等。

### 3. 脚本定制
可以修改上传脚本，添加自定义的文件过滤规则。

### 4. 快速测试
```bash
# 测试服务器健康状态
curl http://localhost:3001/api/health

# 测试上传功能
curl -X POST \
  -H "X-Simple-Auth: $(echo -n 'upload:upload123' | base64)" \
  -F "file=@test.txt" \
  http://localhost:3001/api/upload
```

## 📦 用户分发包

创建用户分发包：
```bash
# 创建分发目录
mkdir user_package

# 复制必要文件
cp one_click_upload.sh user_package/
cp one_click_upload.bat user_package/
cp 用户使用说明.md user_package/

# 创建快速说明
cat > user_package/README.txt << 'EOF'
数据管理平台 - 一键上传工具

使用方法：
1. 将上传脚本放在要上传的文件夹中
2. 双击运行脚本
3. 按提示操作即可

Linux/Mac用户: 使用 one_click_upload.sh
Windows用户: 使用 one_click_upload.bat

详细说明请查看：用户使用说明.md
EOF

# 打包分发
tar -czf user_upload_tools.tar.gz user_package/
```

---

**🎉 简化配置，一键启动，轻松管理！无需SSH密钥，无需复杂配置！**