# LeRobot数据管理系统使用说明书

## 系统概述

LeRobot数据管理系统是一个用于管理和展示机器人数据集的Web应用程序，支持视频、点云、电机数据的可视化和交互式分析。

## 功能模块

### 1. 数据列表管理

#### 1.1 数据列表展示
- **功能描述**：以树形表格形式展示所有数据集和文件
- **界面元素**：
  - 文件夹/文件名列
  - 文件大小列
  - 时长列
  - 上传者列（仅文件夹级别显示）
  - 上传时间列（仅文件夹级别显示，支持排序）
  - 操作列

#### 1.2 数据筛选和排序
- **时间排序**：可按上传时间升序/降序排列
- **大小排序**：可按文件大小排序

#### 1.3 批量操作
- **多选功能**：支持勾选多个文件进行批量操作
- **批量下载**：将选中文件打包为ZIP文件下载
- **下载重试机制**：支持最多3次重试，每次间隔1秒

### 2. 数据展示模块

#### 2.1 Episode列表
- **功能描述**：左侧显示当前数据集的所有episode
- **交互方式**：点击episode项切换显示内容
- **视觉反馈**：选中的episode高亮显示

#### 2.2 视频播放器
- **多摄像头支持**：同时显示3个摄像头视角
- **同步播放**：所有视频同步播放/暂停
- **播放控制**：
  - 播放/暂停按钮
  - 进度条拖拽
  - 时间显示（当前时间/总时长）
- **悬停控制**：鼠标悬停在视频上显示播放按钮

#### 2.3 电机数据可视化
- **实时图表**：显示6个电机的数据曲线
- **时间同步**：红色虚线指示当前播放时间
- **数据表格**：显示当前帧的电机状态和动作数据
- **自动缩放**：Y轴根据数据范围自动调整

#### 2.4 点云数据展示
- **双摄像头点云**：cam_top和cam_right_wrist两个视角
- **3D交互**：
  - 鼠标拖拽旋转视角
  - 滚轮缩放
  - 右键平移
- **质量切换**：每个点云窗口独立的质量选择器
  - 低质量（300点/帧）
  - 中等质量（600点/帧）
  - 高质量（1000点/帧）
  - 完整数据（2000点/帧）
- **加载状态**：质量切换时显示加载指示器
- **相机重置**：一键重置相机视角
- **颜色编码**：点云按Z轴高度进行颜色编码

### 3. 加载和状态管理

#### 3.1 骨架图加载效果
- **触发时机**：
  - 点击"数据展示"按钮时立即显示
  - 切换episode时显示
- **显示内容**：
  - 视频播放器骨架图（3个）
  - 控制面板骨架图
  - 图表区域骨架图
  - 数据表格骨架图
  - 点云窗口骨架图（2个）
- **显示时长**：约3秒钟

#### 3.2 错误处理
- **WebGL上下文丢失**：自动检测并提示用户刷新页面
- **视频加载失败**：显示错误提示并继续加载其他内容
- **点云渲染错误**：使用ErrorBoundary捕获并显示友好错误信息

## 操作流程

### 主要使用流程

1. **进入系统**：访问数据列表页面
2. **浏览数据**：查看文件夹和文件列表
3. **筛选数据**：使用项目筛选器或排序功能
4. **选择数据集**：点击文件夹行的"数据展示"按钮
5. **查看数据**：
   - 左侧选择episode
   - 右侧查看多模态数据
   - 使用播放控制同步查看
   - 调整点云质量获得更好效果

### 批量下载流程

1. **选择文件**：勾选需要下载的文件
2. **点击下载**：点击"下载"按钮
3. **等待处理**：系统自动打包文件
4. **获取文件**：浏览器自动下载ZIP文件

## 技术规格

### 支持的数据格式
- **视频格式**：MP4, MOV
- **数据格式**：Parquet文件
- **点云数据**：内嵌在Parquet文件中

### 性能参数
- **视频同步精度**：100ms更新间隔
- **点云渲染**：WebGL加速，支持最多2000点/帧
- **数据质量级别**：4个级别，平衡性能和质量
- **下载重试**：最多3次，间隔1秒

### 浏览器兼容性
- **推荐浏览器**：Chrome 90+, Firefox 88+, Safari 14+
- **必需功能**：WebGL 2.0支持
- **最低分辨率**：1280x720

## 已知限制

1. **数据格式限制**：仅支持特定格式的LeRobot数据集
2. **浏览器要求**：需要WebGL 2.0支持
3. **内存使用**：大数据集可能占用较多内存
4. **网络依赖**：需要稳定的网络连接加载数据

## 更新日志

### v1.0.0 (当前版本)
- ✅ 数据列表管理功能
- ✅ 多模态数据展示
- ✅ 点云质量切换
- ✅ 骨架图加载效果
- ✅ 批量下载功能
- ✅ 错误处理机制

---
